
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<META name="keywords" content="Битрикс управление сайтом документация PHP код страница как сделать сайт на PHP">
<script type="text/JavaScript"> if (window.name != "content") window.location = "../../../index.html?page=source%2Fsettings%2Fsettings%2Fcache.php.html"; </script>

<title>Автокеширование</title>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<meta http-equiv="Content-Language" content="ru">

<style>@import url(../../docstyle.css);</style>

<script src="../../wow.js"></script>

<script type="text/JavaScript">
top.pageid = "settings/settings/cache.php.html";
</script>

</head>

<body id="dxBody" topMargin="0" onload="bodyLoad()">
<!-- this header was added by chm2web -->

<div id="pagetop">
<div id="projectnamebanner">
<table class="projectnametable" cellSpacing="0">
	<tr>
		<td>1С-Битрикс: Управление сайтом</td>
		<td class="feedback"><a 
      href="mailto:support@bitrixsoft.ru?subject=Вопрос%20по%20документации%20(Топик [Автокеширование])">Отправить 
      отзыв</a> по этому разделу&nbsp;&nbsp;&nbsp;</td></tr>
</table></div>
<div id="pagetitlebanner">
<h1 class="Banner">Автокеширование</h1></div></div>
<div id="pagebody" valign="bottom">

<h4 id="topictoctitle">В этом разделе</h4>
<menu id="topictoc">
  <li><a href="#cache" >Кеширование компонентов</a> </li> <li><a href="#html_cache" >HTML кеш</a> </li>

  <li><a href="#clear_cache" >Очистка файлов кеша</a> </li>
</menu>
<h4><a name="cache"></a>Кеширование компонентов</h4>

<p>Автокеширование стало одной из основных технологий, вошедших в &laquo;1С-Битрикс: Управление сайтом 6.0&raquo; и Компоненты 2.0. Использование технологии автокеширования позволяет быстро подготовить сайт и компоненты проекта к работе в условиях стрессовых нагрузок или адаптировать сайт к работе на виртуальном хостинге. Методология разработки Компонента 2.0 включает обязательное требование поддержки технологии Автокеширования для разработчиков.</p>

<p>На странице <b>Настройки кеширования</b> можно включить либо отключить автокеширование на сайте.</p>

<p>Суть автокеширования заключается в том, что все динамические компоненты, которые используются для создания веб-страниц получили встроенную поддержку управления кешированием. Для использования новой технологии нетехническому специалисту достаточно включить автокеширование одной кнопкой на административной панели. При этом все компоненты, у которых был включен режим автокеширования создадут кеши и полностью перейдут в режим работы без запросов к базе данных.</p>

<p><strong>Обратите внимание:</strong> при использовании режима &quot;Автокеширования&quot;, обновление информации, выводимой компонентами, происходит в соответствии с параметрами отдельных компонентов. </p>

<p>Для того чтобы обновить содержимое закешированных объектов на странице, вы можете: </p>

<ol>
  <li>Перейти на нужную страницу и обновить ее содержимое, используя специальный&nbsp;пункт в административной панели для очистки закешированой информации. 
    <br />
  
    <br />
  <img src="../../images/iblock/dfe/cash_edit.png" width="227" height="91"> 
    <br />
  &nbsp; </li>

  <li>В режиме Разработка&nbsp;использовать кнопки для очистки кеша в панели отдельных компонентов. 
    <br />
  
    <br />
  <img src="../../images/iblock/aa2/cash_component.png" width="329" height="120"> 
    <br />
  &nbsp; </li>

  <li>Необходимо перейти к настройкам выбранных компонентов и перевести их в режим работы без кеширования. 
    <br />
  
    <br />
  <img src="../../images/iblock/aa0/spisok.gif" width="180" height="62"> </li>
</ol>

<p><strong>Примечание:</strong> При включении режима автокеширования компонентов, компоненты с настройкой кеширования <i>&quot;Авто&quot;</i> будут переведены в режим работы с кешированием. </p>

<p>Компоненты с настройкой кеширования <i>&quot;Кешировать&quot;</i> и временем кеширования больше нуля, всегда работают в режиме кеширования. </p>

<p>Компоненты с настройкой кеширования <i>&quot;Не кешировать&quot;</i> или временем кеширования равным нулю, всегда работают без кеширования.</p>

<h4><a name="html_cache"></a>HTML кеш</h4>

<table class="tnormal">
  <tbody>
    <tr><th width="25%">Поле</th><th width="75%">Описание</th></tr>
  
    <tr><td>Маска включения</td><td>Укажите файлы и типы файлов, которые будут обрабатываться html кешем.</td></tr>
  
    <tr><td>Маска исключения</td><td>Укажите файлы и типы файлов, которые&nbsp;<strong>не</strong> будут обрабатываться html кешем.</td></tr>
  
    <tr><td>Дисковая квота (мегабайт)</td><td>Дисковая квота кеша (задается в мегабайтах).&nbsp;</td></tr>
  </tbody>
</table>

<p>Механизм HTML-кеширования лучше всего включить на какой-нибудь редко изменяющийся раздел с регулярным посещением анонимных посетителей, так как при включенном HTML-кешировании происходят следующие процессы:</p>

<ul>
  <li>механизмом HTML-кеша обрабатываются только страницы, не указанные в маске исключения и указанные в маске включения; </li>

  <li>если на такие страницы заходит не авторизованный пользователь, то выполняется проверка существования файла кеша и если таковой найден, то выдается страница из кеша, не задействуя никакие модули продукта; например, не будет работать модуль статистики (не засчитаются хиты этого пользователя), модуль рекламы, главный и другие модули; </li>

  <li>при этом, если на момент включения кеша был установлен модуль компрессии, то страница будет отдаваться в сжатом виде; </li>

  <li>если страница в кеше не найдена, то код исполняется в обычном режиме; когда страница полностью сформирована, ее копия сохраняется в HTML-кеш; </li>
</ul>

<p>Oчистка кеша:</p>

<ul>
  <li>если сохраняемый объем приводит к превышению дисковой квоты кеша, то кеш полностью очищается; </li>

  <li>так же полная очистка кеша происходит при любом изменении данных в административной части системы; </li>

  <li>если в публичной части сайта происходит POST данных (например, добавление комментария или голосование), то сбрасывается соответствующая часть кеша; </li>
</ul>

<p>Необходимо отметить, что для неавторизованных пользователей происходит удаление сессии (например, если неавторизованный пользователь перейдет в закешированную часть сайта, то все данные его сессии будут удалены).</p>

<p>Из всего выше сказанного следует, что:</p>

<ul>
  <li>не ведется учет статистики; </li>

  <li>модуль рекламы будет работать только в момент создания кеша (это не относится к внешней динамической рекламе (Begun и пр.); </li>

  <li>например, для неавторизованных пользователей результаты сравнения товаров не будут сохранены (так как его данные хранятся в сессии, которой &quot;нет&quot;); </li>

  <li>необходимо обязательно задать дисковую квоту во избежание DoS-атаки по дисковому пространству; </li>

  <li>после включения механизма HTML-кеширования необходимо проверить весь функционал раздела, к которому применен кеш (например, может не сработать публикация комментариев со старыми шаблонами блогов); </li>
</ul>

<h4><a name="clear_cache"></a>Очистка файлов кеша</h4>

<p>Эта форма используется для удаления файлов кэша, содержащих устаревшую или сбойную информацию.</p>

<table class="tnormal">
  <tbody>
    <tr><th width="25%">Поле</th><th width="75%">Описание</th></tr>
  
    <tr><td>Только устаревшие</td><td>Файлы, содержащие устаревшую информацию.</td></tr>
  
    <tr><td>Все</td><td>Все файлы кеша.</td></tr>
  
    <tr><td>Меню</td><td>Меню может быть закешировано, если происходят проверки доступа к различным пунктам меню, разделам. Данный пункт позволяет очистить этот кеш. </td></tr>
  
    <tr><td>Весь управляемый</td><td>Все файлы раздела /bitrix/cash/ </td></tr>
  
    <tr><td>Все страницы HTML кеша</td><td>Удаление страниц HTML кеша.</td></tr>
  </tbody>
</table>

<p>Для удаления выбранных файлов нажмите кнопку &quot;Очистить&quot;.</p>

<p class="note">После удаления файлов кеша выводимые данные будут обновлены до актуального состояния. Новые файлы кеша будут создаваться постепенно по мере обращений к страницам с закешированными областями.</p>
<bitrix:sys name="feedbackform"></bitrix:sys>

<table id="topicfooter">
	<tr>
		<td>© «Битрикс», 2001-2008, «1C-Битрикс», 2008</td>
		<td style="width: 50px">&nbsp;</td>
		<td style="text-align: right"><a href="http://www.1c-bitrix.ru" target="_blank">1С-Битрикс: Управление сайтом</a></td></tr>
</table></div>
<script type="text/JavaScript" src="../../../files/supply.js"></script>
<script type="text/JavaScript">
var fe = FindFrame("toc", top);
if ((fe != null) && (top.jstree != null)) {
  if (top.FITEMS[top.pagenum] != top.pageid)
    top.jstree.OpenTreeNode("source/" + top.pageid);
}
</script>
</body></html>
