
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<META name="keywords" content="Битрикс управление сайтом документация PHP код страница как сделать сайт на PHP">
<script type="text/JavaScript"> if (window.name != "content") window.location = "../../../index.html?page=source%2Fservice%2Fadvertising%2Ffaq.php.html"; </script>

<title>Частые вопросы</title>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<meta http-equiv="Content-Language" content="ru">

<style>@import url(../../docstyle.css);</style>

<script src="../../wow.js"></script>

<script type="text/JavaScript">
top.pageid = "service/advertising/faq.php.html";
</script>

</head>

<body id="dxBody" topMargin="0" onload="bodyLoad()">
<!-- this header was added by chm2web -->

<div id="pagetop">
<div id="projectnamebanner">
<table class="projectnametable" cellSpacing="0">
	<tr>
		<td>1С-Битрикс: Управление сайтом</td>
		<td class="feedback"><a 
      href="mailto:support@bitrixsoft.ru?subject=Вопрос%20по%20документации%20(Топик [Частые вопросы])">Отправить 
      отзыв</a> по этому разделу&nbsp;&nbsp;&nbsp;</td></tr>
</table></div>
<div id="pagetitlebanner">
<h1 class="Banner">Частые вопросы</h1></div></div>
<div id="pagebody" valign="bottom">
 
<h2>Как использовать flash-баннеры ?</h2>
 
<ul> 	 
  <li>Предварительно flash-баннер необходимо загрузить в каталог <code style="font-style: italic;">/upload/advertising/flash/</code></li>
 	 
  <li>При создании баннера необходимо в коде баннера указать следующий код: 
    <br />
   
    <br />
   
    <pre class="syntax" id="xmp8BB60311">&lt;a <br />href=&../bitrix/click.php?id=#banner_id#&amp;event1=banner&amp;event2=click&amp;event3=#banner_id#&amp;goto=[url]&quot;&gt;<br />&lt;div&gt;<br />&lt;OBJECT<br />classid=&quot;clsid:D27CDB6E-AE6D-11cf-96B8-444553540000&quot;<br />codebase=&quot;http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0&quot;<br />id=&quot;banner&quot;<br />WIDTH=&quot;190&quot; <br />HEIGHT=&quot;190&quot; <br />ALIGN=&quot;&quot;&gt;<br />&lt;PARAM NAME=movie VALUE=&quot;/upload/advertising/flash/banner.swf&quot;&gt; <br />&lt;PARAM NAME=quality VALUE=high&gt; <br />&lt;PARAM NAME=bgcolor VALUE=#FFFFFF&gt; <br /><br />&lt;EMBED <br />src=&../upload/advertising/flash/banner.swf&quot; <br />quality=high <br />bgcolor=#FFFFFF<br />WIDTH=&quot;190&quot; <br />HEIGHT=&quot;190&quot; <br />NAME=&quot;banner&quot; <br />ALIGN=&quot;&quot;<br />TYPE=&quot;application/x-shockwave-flash&quot; <br />PLUGINSPAGE=&quot;http://www.macromedia.com/go/getflashplayer&quot;&gt;<br />&lt;/EMBED&gt;<br />&lt;/OBJECT&gt;<br />&lt;/div&gt;<br />&lt;/a&gt;<br />
</pre>
   заменив при этом <code style="font-weight: bold;">banner.swf</code> на имя вашего flash-баннера и указав его размеры. В самом flash-баннере желательно не задавать ссылку для перехода. А в <code style="font-style: italic;">[URL]</code> необходимо указать url-кодированную ссылку.</li>
 </ul>
 
<h2>Почему у меня не считается количество посетителей просматривающих баннеры?</h2>
 
<p>Суть проблемы состоит в том, что модуль рекламы не может уcтановить <span style="font-weight: bold;">cookie</span> для посетителя просмотревшего тот или иной баннер. Данный <span style="font-weight: bold;">cookie</span> устанавливается в функции <span style="font-style: italic;">CAdvBanner::Show</span>, но так как в большинстве случаев, данная функция вызывается уже после того как HTML-контент страницы начинает отсылаться браузеру клиента, то в соответствии с ограничениями протокола HTTP, <span style="font-weight: bold;">cookie</span> не может быть установлен.</p>
 
<p>Проблему можно решить следующими путями:</p>
 
<ul> 	 
  <li>Для редакции <span style="font-weight: bold;">&quot;Эксперт&quot;</span> и <span style="font-weight: bold;">&quot;Бизнес&quot;</span> инсталлируйте модуль компрессии. Данный модуль буферизирует результат парсинга, прежде чем сжать его и передать браузеру клиента. Буферизация позволит корректно учитывать посетителей просматривающих баннеры.</li>
 	 
  <li>Если ваш сайт целиком работает на PHP, то для редакции <b>Веб-аналитика</b> в файле <code style="font-style: italic;">/bitrix/php_interface/dbconn.php</code> добавьте следующий PHP код: 
    <br />
   
    <br />
   	 	 
    <pre class="syntax" id="xmpD5205A3D">ob_start();</pre>
   	Данная функция включает буферизацию парсинга PHP страниц, что позволит корректно учитывать посетителей.</li>
 	 
  <li>Если на вашем сайте нет возможности использовать буферизацию, то учет посетителей будет работать, если в дизайне сайта (<span style="font-weight: bold;">prolog_main.php</span>, <span style="font-weight: bold;">epilog_main.php</span>) использовать следующую схему: 
    <br />
   
    <br />
   	 
    <pre class="syntax" id="xmpFC361CBC">&lt;?<br />// прежде чем начинается вывод страницы, необходимо получить HTML баннеров<br />if (CModule::IncludeModule(&quot;advertising&quot;)):<br />	$strBanner_top	= CAdvBanner::Show(&quot;TOP&quot;); <br />	$strBanner_bottom = CAdvBanner::Show(&quot;BOTTOM&quot;); <br />	$strBanner_left   = CAdvBanner::Show(&quot;LEFT&quot;); <br />endif;<br />?&gt;<br />&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;<br />&lt;html&gt;<br />&lt;head&gt;&lt;/head&gt;<br />&lt;body&gt;<br />	&lt;?<br />	// выводим HTML баннеров в заранее отведенных рекламных областях<br />	echo $strBanner_top;<br />	echo $strBanner_bottom;<br />	echo $strBanner_left;<br />	?&gt;<br />&lt;/body&gt;<br />&lt;/html&gt;<br /></pre>
   	 	Т.е. перед тем как начинается вывод HTML-контента, вы предварительно запоминаете HTML всех баннеров в PHP переменных, а уже затем используете их вывод в том месте дизайна, где вам необходимо.</li>
 </ul>
 <bitrix:sys name="feedbackform"></bitrix:sys>

<table id="topicfooter">
	<tr>
		<td>© «Битрикс», 2001-2008, «1C-Битрикс», 2008</td>
		<td style="width: 50px">&nbsp;</td>
		<td style="text-align: right"><a href="http://www.1c-bitrix.ru" target="_blank">1С-Битрикс: Управление сайтом</a></td></tr>
</table></div>
<script type="text/JavaScript" src="../../../files/supply.js"></script>
<script type="text/JavaScript">
var fe = FindFrame("toc", top);
if ((fe != null) && (top.jstree != null)) {
  if (top.FITEMS[top.pagenum] != top.pageid)
    top.jstree.OpenTreeNode("source/" + top.pageid);
}
</script>
</body></html>
